!function(s,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(s="undefined"!=typeof globalThis?globalThis:s||self).svi=e()}(this,(function(){"use strict";class s{static ANIM_TIMEOUTS={changed:1700,pending:1500,fail:2e3,done:2e3};#s;#e;#t;#i;#n;constructor(s,e=!1,t="small",i="hide",n=[]){this.#s=s instanceof HTMLElement?s:"string"==typeof s?document.querySelector(s):null,e&&this.#r(),this.size=t,this.state=i,this.addTransitionListeners(n),this.#a()}get state(){return this.#t}set state(s){let e=this.state;this.#t=s.toLowerCase(),this.#a(),e!==this.state&&this.#h(e,this.state)}get size(){return this.#e}set size(s){this.#e=s,this.#a()}addTransitionListeners(s){this.#i||(this.#i=[]),s&&(Array.isArray(s)?s.forEach((s=>this.addTransitionListeners(s))):s instanceof Function&&this.#i.push(s))}removeTransitionListeners(s){if(s)if(Array.isArray(s))s.forEach((s=>this.removeTransitionListeners(s)));else if(s instanceof Function&&this.#i){const e=this.#i.indexOf(s);e>-1&&this.#i.splice(e,1)}}#r(){let s=this.#o(this.#s,"div",["sheet"]),e=this.#o(s,"div",["asterisk"]);this.#o(e,"div",["axis"],3),this.#o(s,"div",["headline"]);let t=this.#o(s,"div",["line-container"]);this.#o(t,"div",["line"],3);let i=this.#o(this.#s,"div",["mark-flex"]);this.#o(i,"div",["mark"])}#o(s=this.#s,e="div",t=[],i=1){let n=[];for(let r=0;r<i;r++){let i=document.createElement(e);i.classList.add(...t),s.appendChild(i),n.push(i)}return 1===n.length?n[0]:n}#a(){this.#s.classList.add("si-root"),Array.from(this.#s.classList).filter((s=>s.startsWith("size-")||s.startsWith("state-"))).forEach((s=>this.#s.classList.remove(s))),this.#s.classList.add(`size-${this.size}`),this.#s.classList.add(`state-${this.state}`)}#h(e,t){this.#l(e,"changed"),this.#l(t,"started"),this.#d(),s.ANIM_TIMEOUTS.hasOwnProperty(t)&&(this.#n=setTimeout((()=>{this.#l(t,"finished")}),s.ANIM_TIMEOUTS[t]))}#d(){this.#n&&clearTimeout(this.#n)}#l(s,e){this.#i&&this.#i.forEach((t=>t(this,s,e)))}}return s}));
